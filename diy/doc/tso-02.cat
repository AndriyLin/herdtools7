"A third attempt for TSO"

include "cos.cat"

let mfence = po & (M * MFENCE) ; po

(* Uniproc check specialized for TSO *)
irreflexive (R * W) & po-loc;rfi as uniprocRW
irreflexive (W * R) & po-loc;fri as uniprocWR

(* Communication relations that order events*)
let com-tso = rfe | co | fr
(* Program order that orders events *)
let po-tso = (W*W | R*M) & po | mfence

(* TSP global-happens-before *)
let ghb = po-tso | com-tso
show mfence,ghb
acyclic ghb as tso


